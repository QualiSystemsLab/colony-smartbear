spec_version: 1
kind: blueprint
metadata:
  description: >
    Application is configured to deploy with multiple instances for load tests.
    
clouds: 
  - AWS: us-west-1
  
artifacts:
  - leads: leads-webapp-artifacts/latest/leads-webapp.latest.tar.gz

inputs:
- AWS_INSTANCE_TYPE: m5.large
- INSTANCES_COUNT: 1

applications:
  - leads:
      instances: $INSTANCES_COUNT
      input_values:
        - AWS_INSTANCE_TYPE: $AWS_INSTANCE_TYPE
        - SALESFORCE_LOGIN_URL: $outputs.smartbear-servicev.SALESFORCE_LOGIN_URL
      depends_on:
        - smartbear-servicev
    
  - db:      
      input_values:
        - AWS_INSTANCE_TYPE: $AWS_INSTANCE_TYPE

services:
  - smartbear-servicev
            
debugging:
  availability: on